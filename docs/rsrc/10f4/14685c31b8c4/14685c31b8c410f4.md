ラズパイは5V電源が必要だが、ATX電源の5Vラインは下振れすることがある。特にラズパイ5は5.1Vあたりを要求するとかいう記事もあったりするので、ATXの12V電源から5Vを作るボードを設計します



![image](1470526776571728047.jpg)
![image](1470526777058394443.jpg)
![image](1470526777528029256.jpg)

こちらのシステムは、この記事の執筆時にはすでに完成しています。設計から実装までを振り返ります。

# モチベ

先に述べた通りだが、当方、数年前にラズパイ 3B+ を購入し、しかし何も活用することなく放置されていた

最近になってサーバーを組もうとしてから、しかしこの AI 需要のさなかでメモリが高騰、 PC が組めず、ミニPCも高く、ということでラズパイ 5 の 16GB RAM モデルを追加購入。

ラズパイは USB 給電が一般的なのだが、サーバーラック（とはいえパイプラック）の中に配置するのであれば、そこに PC 用の電源装置があり、12V と 5V が手に入る状態だった。

最初はその 5V 電源を使ってラズパイ２台を動かしていたが、ラズパイ5 のほうの挙動がやや不安定だった。原因は、5V 電源の電圧が下振れして、4.8V 程度になっていた。

[ATX 電源の仕様書](https://cdn.instructables.com/ORIG/FS8/5ILB/GU59Z1AT/FS85ILBGU59Z1AT.pdf) 的には、 5V ラインは プラマイ5%の精度を保証するため、最低値は 4.75V となり、仕様は満たしているのだが、ラズパイ5 的には少々苦しい動作環境だった、のかもしれない。

ということで、12V の電源から 5V への DC-DC 降圧で電源を供給するようなボードを設計することにした

# 三端子レギュレータという選択肢

電源の安定化と、降圧といえば、一番手軽なのは三端子レギュレータ。

よく 5V 電源から、 3.3V の IC 用電源を得るために使ったりする。

しかし、三端子レギュレータは、損失分のエネルギーをすべて熱として消費するみたい。

特に降圧する電位差が大きく、消費電流が大きいほど、発熱が莫大となる。

ラズパイ5 は最大で 5A 消費する。概算での損失は $ (12-5) \cdot 5 = 35 [W] $ となり、AI エージェントと三端子レギュレータでどうにかならないかと揉みに揉んだが、必要な放熱板がどえらいサイズになり、やはり無理だなとなった。

# DC-DC コンバータ

もうひとつ、直流電圧を昇圧、降圧するのに、 DC-DC コンバータという技術がある。

自分は今回初めて触れることとなった。

高速のスイッチングと、チョークコイルの誘導電流によって、電圧を上げたり下げたりできる。

ただこの辺り本当に知識が乏しくて、簡単に DC-DC コンバータを実装できないかと探した結果、スイッチングとチョークコイルなどを内蔵した降圧 DC-DC コンバータ IC [TPSM843521](https://www.ti.com/product/ja-jp/TPSM843521) を見つけた。